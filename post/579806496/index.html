<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>


    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Android 笔记：Activity 二三事 | 
        
        Tianma
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="本文主要记录一些与 Activity 相关的，并不是很容易弄清楚的点。">
    <meta name="keywords" content="Tianma,android notes,Activity">
    <meta name="theme-color" content="#42A5F5">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    color: #ff5722;
  }

  a {
    color: #388E3C;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #42A5F5 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #42A5F5 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #42A5F5 !important;
  }

  .toTop {
    background: #EF6C00 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #EF6C00;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #EF6C00;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #EF6C00;
  }

  .post-toc a:hover {
    color: #388E3C;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #EEEEEE;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.proxy.ustclug.org/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




<!-- Modified by Tianma at 2018年6月28日 23:22:35 -->
<!-- Custom css style -->
<style>

/* Hanabi highlight */
.hanabi-linenumber {
  color: #ff4081;
}
/* Hanabi highlight */

/* Paginator */
#scheme-Paradox .material-nav .page-number {
    display: block;
    padding: 0em 0.8em;
    font-size: 1.3em;
    margin: 0em 0.2em;
    color: #757575;
}
#scheme-Paradox .material-nav .page-number.current {
    color: #ff4081;
    text-align: center;
    font-weight: bold;
    margin: 0 0;
}

#scheme-Paradox .material-nav .space {
    color: #757575;
    text-align: center;
    font-weight: bold;
}

#scheme-Paradox .material-layout .material-post>.material-nav {
    display: flex;
    margin: 10px 15px;
    color: #fff;
    font-weight: 500;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    text-align: center;
}
#scheme-Paradox .material-layout .material-index>.material-nav {
    display: flex;
    margin: 10px 15px;
    color: #fff;
    font-weight: 500;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    text-align: center;
    margin-left: 25%;
    margin-right: 25%;
}
.material-layout .material-post>.material-nav a,  
.material-layout .material-index>.material-nav a {
  color: #7f7f7f
}
/* Paginator */

/* Image Caption */
.image-caption {
    display: block;
    text-align: center;
    margin: 10px 0px;
    color: #666;
}
.post-image-center {
  display: block;
  margin: auto;
}
/* Image Caption */

/* Post License */
#post-license {
  margin: 2em 0;
  padding: 0.5em 1em;
  border-left: 3px solid #ff4081;
  background-color: #f5f5f5;
  list-style: none;
}
/* Post License */

/* Word Count */
#scheme-Paradox .div-post-count {
    margin-left: 2em;
}
@media screen and (max-width: 840px) {
    #scheme-Paradox .div-post-count {
        display: none !important;
    }
}
/* Word Count */

/* Post Entry Thumbnail */
#scheme-Paradox .material-layout .mdl-card__media {
  min-height: 275px;
}

#scheme-Paradox .material-layout .something-else .something-else-logo {
  min-height: 275px;
}

@media screen and (max-width:480px) {
    #scheme-Paradox .material-layout .mdl-card__media {
        min-height: 150px;
    }

    #scheme-Paradox .material-layout .mdl-card {
      min-height: 200px;
    }

    #scheme-Paradox .material-layout .something-else .something-else-logo {
      min-height: 150px;
    }

    #scheme-Paradox .material-layout .mdl-card.something-else {
      min-height: 200px;
    }
}
/* Post Entry Thumbnail */

/** Post Entry Content */
#scheme-Paradox .material-layout .post_entry-module .mdl-card__media~.mdl-card__supporting-text {
  padding-top: 16px;
}

#scheme-Paradox .material-layout .post_entry-content h2 {
  margin: 0 0 15px;
  font-size: 2em;
  font-weight: 500;
}

#scheme-Paradox .material-layout .post_entry-content p {
  margin: 0 0;
}

#scheme-Paradox .material-layout .post_entry-content blockquote {
  border-left: 4px solid #ddd;
  padding: 15px 15px;
  background-color: #f8f8f8;
  font-style: normal;
  color: #777;
  margin: 0 15px 15px;
}
/** Post Entry Content */

/* Post Content blockquote */
#post-content blockquote {
  padding: 15px 15px;
  background-color: #f8f8f8;
}
/* Post Content blockquote */

/* blockquote */
blockquote {
  font-size: 100%;
}

/* sidebar */
.sidebar .sidebar-brand {
  color: rgba(0, 0, 0, 0.8);
  hover: rgba(0, 0, 0, 0.8);
  font-weight: 500 !important;
  font-size: 14px !important;
}

.sidebar .sidebar-header.header-cover {
  background-size: cover;
}

.sidebar .sidebar-nav li a {
  font-weight: 400 !important;
  font-size: 14px;
}
/* sidebar */

/* footer sns icons */
.footer-sns-facebook {
  background: url(/img/footer/footer_ico-facebook.svg);
}

.footer-sns-gplus {
  background: url(/img/footer/footer_ico-gplus.svg);
}

.footer-sns-twitter {
  background: url(/img/footer/footer_ico-twitter.svg);
}

.footer-sns-weibo {
  background: url(/img/footer/footer_ico-weibo.svg);
}

.footer-sns-instagram {
  background: url(/img/footer/footer_ico-instagram.svg);
}

.footer-sns-tumblr {
  background: url(/img/footer/footer_ico-tumblr.svg);
}

.footer-sns-github {
  background: url(/img/footer/footer_ico-github.svg);
}

.footer-sns-linkedin {
  background: url(/img/footer/footer_ico-linkedin.svg);
}

.footer-sns-zhihu {
  background: url(/img/footer/footer_ico-zhihu.svg);
}

.footer-sns-bilibili {
  background: url(/img/footer/footer_ico-bilibili.svg);
}

.footer-sns-telegram {
  background: url(/img/footer/footer_ico-telegram.svg);
}

.footer-sns-v2ex {
  background: url(/img/footer/footer_ico-v2ex.svg);
}

.footer-sns-jianshu {
  background: url(/img/footer/footer_ico-jianshu.svg);
}
/* footer sns icons */

/* footer */
.fa-heart:before {
    content: '\f004'
}

.fa-heart-o:before {
    content: '\f08a'
}
/* footer */

/* footer right */
#scheme-Paradox .mdl-mini-footer a {
  color: #388E3C;
  font-weight: 500;
}

#scheme-Paradox .mdl-mini-footer a:hover {
  color: #388E3C;
}
/* footer right */

</style>

    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Tianma">
    <meta name="msapplication-starturl" content="https://tianma.space/post/579806496/">
    <meta name="msapplication-navbutton-color" content="#42A5F5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Tianma">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://tianma.space/post/579806496/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Android 笔记：Activity 二三事 | Tianma">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="本文主要记录一些与 Activity 相关的，并不是很容易弄清楚的点。">
    <meta property="og:article:tag" content="android notes"> <meta property="og:article:tag" content="Activity"> 

    
        <meta property="article:published_time" content="Mon Feb 12 2018 18:07:51 GMT+0800">
        <meta property="article:modified_time" content="Wed Nov 07 2018 04:04:40 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://tianma.space/post/579806496/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://tianma.space/post/579806496/index.html",
    "headline": "Android 笔记：Activity 二三事",
    "datePublished": "Mon Feb 12 2018 18:07:51 GMT+0800",
    "dateModified": "Wed Nov 07 2018 04:04:40 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Tianma",
        "image": {
            "@type": "ImageObject",
            "url": "/img/kousei.jpg"
        },
        "description": "You are the apple of my eye"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Tianma",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",android notes,ActivityTianma",
    "description": "本文主要记录一些与 Activity 相关的，并不是很容易弄清楚的点。",
}
</script>


    

    <!-- Analytics -->
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-84178484-1', 'auto');ga('send', 'pageview');
</script>
    
    
    

    <!-- Custom Head -->
    

    <!-- fancybox support -->
	
        <script>lsloader.load("fancybox_js","/js/fancybox/jquery.fancybox.min.js?t2LXoiIDGJmos9j6jmohzw==", true)</script>
        <script>lsloader.load("wrap_image_js","/js/wrapImage.js?2z+b2rMZFAJ9HG9/nm3U9g==", true)</script>
        <style id="fancybox_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("fancybox_css","/js/fancybox/jquery.fancybox.min.css?Fnnc049dQ/HvZMD/Mxr4EA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
	
	
	<!-- Import APlayer.js -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Activity-生命周期"><span class="post-toc-number">1.</span> <span class="post-toc-text">Activity 生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#异常情况下的生命周期"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">异常情况下的生命周期</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Activity-启动模式"><span class="post-toc-number">2.</span> <span class="post-toc-text">Activity 启动模式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IntentFilter-匹配规则"><span class="post-toc-number">3.</span> <span class="post-toc-text">IntentFilter 匹配规则</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#action-匹配规则"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">action 匹配规则</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#category-匹配规则"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">category 匹配规则</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#data-匹配规则"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">data 匹配规则</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://tianma-bucket.oss-cn-shanghai.aliyuncs.com/images/Zero_Two_02.jpg@!w960)">
    
            <p class="article-headline-p">
                Android 笔记：Activity 二三事
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/kousei.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <span>发表：2月 12, 2018</span>
        <span>更新：11月 07, 2018</span>
    </div>

    
    <div class="div-post-count">
        <span class="post-count">字数统计：1.8k 字</span>
        <span class="post-count">阅读时长：7 分</span>
    </div>
	

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Activity/">Activity</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/android-notes/">android notes</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/post/579806496/" class="leancloud-views_num" data-flag-title="Android 笔记：Activity 二三事">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    
        
    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>本文主要记录一些与 <code>Activity</code> 相关的，并不是很容易弄清楚的点。<br><a id="more"></a></p>
<h2 id="Activity-生命周期"><a href="#Activity-生命周期" class="headerlink" title="Activity 生命周期"></a>Activity 生命周期</h2><p>先上 Google 官方的图：<br><img alt="Activity 生命周期" class=" post-image-center" src="https://tianma-bucket.oss-cn-shanghai.aliyuncs.com/images/activity_lifecycle.png@!w540"><span class="image-caption">Activity 生命周期</span></p>
<ul>
<li><code>onCreate()</code>：当前 Activity 实例第一次被创建时调用</li>
<li><code>onStart()</code>：Activity 不可见到可见 时调用</li>
<li><code>onResume()</code>： Activity 获取焦点，可以进行交互时调用</li>
<li><code>onPause()</code>：Activity 失去焦点，无法交互时调用</li>
<li><code>onStop()</code>：Activity 完全不可见时调用</li>
<li><code>onDestroy()</code>：Activity 即将销毁前调用</li>
<li><code>onRestart()</code>：Activity 正在被重新启动时调用</li>
</ul>
<p>这里又引申出 Activity 相关的三个生存期：</p>
<ul>
<li>完整生存期： <code>onCreate() -&gt; onDestroy()</code></li>
<li>可见生存期： <code>onStart() -&gt; onStop()</code></li>
<li>前台（可交互）生存期： <code>onResume() -&gt; onPause()</code><br>&nbsp;</li>
<li>Q：Activity A 启动 Activity B 时，A 的 <code>onPause()</code> 先执行还是 B 的 <code>onResume()</code> 先执行呢？<br>A：A 的 <code>onPause()</code> 先执行。<br>结论：考虑到只有在当前 Activity 的 <code>onPause()</code> 执行完毕之后，新的 Activity 的 <code>onResume()</code> 才执行，所以，<strong>在 <code>onPause()</code> 中尽量别做重量级操作</strong>。</li>
</ul>
<h3 id="异常情况下的生命周期"><a href="#异常情况下的生命周期" class="headerlink" title="异常情况下的生命周期"></a>异常情况下的生命周期</h3><img alt="Activity 异常情况重建过程" class=" post-image-center" src="https://tianma-bucket.oss-cn-shanghai.aliyuncs.com/images/Activity_recreate_diagram.jpg@!w540"><span class="image-caption">Activity 异常情况重建过程</span>
<p>这里的 异常情况 主要指以下两种情况：</p>
<ol>
<li>系统相关的资源配置发生改变产生的异常：<br> 如果Activity不作特殊处理，当系统配置发生改变（比如屏幕方向发生改变），Activity就会被销毁并重建，<code>onSaveInstanceState()</code> 和 <code>onRestoreInstanceState()</code> 这两个方法就会在这一过程中被调用。</li>
<li><p>内存资源不足导致 Activity 被回收的异常：<br>Activity会有优先级分级情况，优先级依次降低：</p>
<ul>
<li>前台 Acitivty，即正在交互的 Activity</li>
<li>可见但非前台 Activity</li>
<li>不可见后台 Activity</li>
</ul>
<p>内存资源不足导致 Activity 被回收，在后续也会通过 <code>onSaveInstanceState()</code> 和 <code>onRestoreInstanceState()</code> 存储和恢复数据。<br>没有四大组件在运行的进程很容易被系统杀死，所以，一些后台工作不适合脱离四大组件独自后台运行，最佳实践是依赖 Service 以保证进程有较高的优先级。</p>
</li>
</ol>
<p><code>Activity</code> 在异常情况下进行重建时，系统会默认对 <code>View</code> 相关的状态进行存储和恢复，具体会恢复特定 <code>View</code> 的什么状态数据需要去查阅源码。也就是说，非 <code>View</code> 相关的数据，需要自行存储和恢复。</p>
<p>针对上面的第一种情况，<code>Activity</code> 的 <code>configChanges</code> 可以指定一些资源配置属性，当这些资源配置发生改变之后，<code>Activity</code> 不会重建，不会调用 <code>onSaveInstanceState()</code> 和 <code>onRestoreInstanceState()</code>，取而代之的是回调 <code>onConfigurationChanged()</code> 方法。最常用的 <code>configChanges</code> 选项有：</p>
<ul>
<li><code>locale</code>：设备的本地位置发生改变，一般指切换系统语言；</li>
<li><code>orientation</code>：屏幕方向发生改变，比如旋转手机屏幕；</li>
<li><code>keyboardHidden</code>：键盘的可访问性发生改变，比如用户调出键盘。</li>
</ul>
<h2 id="Activity-启动模式"><a href="#Activity-启动模式" class="headerlink" title="Activity 启动模式"></a>Activity 启动模式</h2><p><code>Activity</code> 的 <code>launchMode</code> 由四种：</p>
<ol>
<li><code>standard</code>：默认启动方式，每次启动这样的 <code>Activity</code> 都会生成创建新实例。<strong>谁启动以 <code>standard</code> 为 <code>launchMode</code> 的 <code>Activity</code>, 该 <code>Activity</code> 就会运行在它的那个任务栈中</strong>；</li>
<li><code>singleTop</code>：栈顶复用模式，要启动的 <code>Activity</code> 已经有实例在栈顶，则不会生成新实例，不会调用 <code>onCreate()</code> 和 <code>onStart()</code> 而会调用该 <code>Activity</code> 的 <code>onNewIntent()</code> 方法；其他情况，参考 <code>standard</code> 模式；</li>
<li><code>singleTask</code>：栈内复用模式。比如 <code>Activity</code> A 的 <code>TaskAffinity</code> 属性指定的任务栈为 a，当启动 A 时，如果任务栈 a 不存在，则创建 a 任务栈，并创建 <code>Activity</code> A 让其入栈；如果任务栈 a 存在，且 A 实例不存在，则 A 入栈；如果任务栈 a 存在，且 A 实例存在，则清空（pop）在 A 之上的所有 <code>Activity</code> 让 A 置于栈顶，并回调 A 的 <code>onNewIntent()</code> 方法；<br><br><code>TaskAffinity</code> 即 任务相关性，这个参数标识 <code>Activity</code> 所需要的任务栈的名字，默认情况下，这个值是应用包名。 <code>TaskAffinity</code> 主要和 <code>singleTask</code> 启动模式配对使用，<code>singleTask</code> 启动模式的 <code>Activity</code> 会启动在 <code>TaskAffinity</code> 指定的任务栈中。比如：<pre><code class="xml">&lt;activity
 android:name=&quot;com.example.ExampleActivity&quot;
 android:taskAffinity=&quot;com.exmple.exampleTask&quot;
 android:launchMode=&quot;singleTask&quot;/&gt;
</code></pre>
</li>
<li><code>singleInstance</code>：单实例模式。可以看做是特殊的 <code>singleTask</code> 模式，除了具有 <code>singleTask</code> 特性外，此种模式的 <code>Activity</code> 只能单独在一个任务栈。</li>
</ol>
<h2 id="IntentFilter-匹配规则"><a href="#IntentFilter-匹配规则" class="headerlink" title="IntentFilter 匹配规则"></a>IntentFilter 匹配规则</h2><p><code>IntentFilter</code> 用在 <code>Activity</code> 的隐式调用上，先看 <code>IntentFilter</code> 示例：</p>
<pre><code class="xml">&lt;activity android:name=&quot;com.example.ExampleActivity&quot;&gt;
  &lt;intent-filter&gt;
    &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
    &lt;data android:mimeType=&quot;text/plain&quot; /&gt;
  &lt;/intent-filter&gt;

  &lt;intent-filter&gt;
    &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;
    &lt;action android:name=&quot;android.intent.action.SEND_MULTIPLE&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
    &lt;category android:name=&quot;com.example.intent.category.CUSTOM_1&quot; /&gt;
    &lt;category android:name=&quot;com.example.intent.category.CUSTOM_2&quot; /&gt;
    &lt;data android:scheme=&quot;http&quot;
      android:host=&quot;com.example.com&quot;
      android:port=&quot;4000&quot;
      android:path=&quot;folder&quot;
      android:mimeType=&quot;text/plain&quot; /&gt;
    &lt;data android:scheme=&quot;content&quot;
      android:host=&quot;com.example.project&quot;
      android.port=&quot;1080&quot;
      android:path=&quot;images&quot;
      android:mimeType=&quot;image/*&quot; /&gt;
  &lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre>
<p>可以看出一个 <code>Activity</code> 可以包含多个 <code>IntentFilter</code>，即形成一个 <code>IntentFilter</code> 列表，只要匹配任何一个 <code>IntentFilter</code> 就可以启动该 <code>Activity</code>。而 <code>IntentFilter</code> 中可以包含 <code>action</code>、 <code>category</code>、 <code>data</code> 三元素，只有这三个都匹配成功，整个 <code>IntentFilter</code> 才能匹配成功。</p>
<h3 id="action-匹配规则"><a href="#action-匹配规则" class="headerlink" title="action 匹配规则"></a>action 匹配规则</h3><p><code>Intent</code> 中的 <code>action</code> 必须和 <code>IntentFilter</code> 中包含的 <code>action</code> 之一匹配就可以匹配成功。如果，把 <code>Intent</code> 中指定的 <code>action</code> 看做元素 a，把 <code>IntentFilter</code> 中指定的 <code>action</code> 所构成的集合看成集合 A，则 当 a ∈ A 时， <code>action</code> 匹配成功。</p>
<h3 id="category-匹配规则"><a href="#category-匹配规则" class="headerlink" title="category 匹配规则"></a>category 匹配规则</h3><ol>
<li>如果 <code>Intent</code> 指定 <code>category</code>，就必须被包含在 <code>IntentFilter</code> 中所指定的 <code>category</code>。如果，<code>Intent</code> 中指定的 <code>category</code> 元素构成集合 A, <code>IntentFilter</code> 中指定的 <code>category</code> 元素构成集合 S，则当 A ⊆ S 时， <code>category</code> 匹配成功；</li>
<li>如果 <code>Intent</code> 不指定 <code>category</code>, 则默认的 <code>category</code> 为 <code>android.intent.category.DEFAULT</code>, 也会匹配成功。</li>
</ol>
<h3 id="data-匹配规则"><a href="#data-匹配规则" class="headerlink" title="data 匹配规则"></a>data 匹配规则</h3><p><code>data</code> 部分由 <code>mimeType</code> 和 <code>URI</code> 组成，<code>mimeType</code> 表示媒体类型，比如图片、音频、视频、文本等格式，<code>URI</code> 的结构为：</p>
<pre><code class="xml">&lt;scheme&gt;://&lt;host&gt;:&lt;port&gt;[&lt;path&gt;|&lt;pathPrefix&gt;|&lt;pathPattern&gt;]
</code></pre>
<p>比如：</p>
<pre><code class="xml">http://com.example.com:8080/search/info
content://com.example.project:200/folder/subfolder/etc
</code></pre>
<ul>
<li><code>scheme</code>：<code>URI</code> 的模式，比如 http、file、content，也可以是自定义字符串，如果没有指定 <code>scheme</code> 的值，则整个 <code>URI</code> 无效；</li>
<li><code>host</code>：<code>URI</code> 的主机名，如果没有指定，则整个 <code>URI</code> 无效；</li>
<li><code>port</code>：端口号；</li>
<li><code>path</code>、 <code>pathPrefix</code>、 <code>pathPattern</code> 分别代表 完整路径匹配、前缀路径匹配、正则路径匹配。它们必须需要以 <code>/</code> 开头。</li>
</ul>
<p><code>data</code> 的匹配规则跟 <code>action</code> 类似，也就是如果，把 <code>Intent</code> 中指定的 <code>data</code> 看做元素 d，把 <code>IntentFilter</code> 中指定的 <code>data</code> 元素所构成的集合看成集合 D，则 当 d ∈ D 时， <code>data</code> 匹配成功。</p>
<p>如果 <code>data</code> 节点中只指定了 <code>mimeType</code>，那么系统默认的 <code>URI</code> 的 <code>scheme</code> 为 content 和 file。也就是说，在这种情况下，比如 <code>intent</code> 指定的 <code>scheme</code> 为 <code>http</code> 则会出现 <code>Activity</code> 找不到的异常。</p>

        
		
			<div>
   <br/>
   <ul id="post-license" class="post-license">
       <li class="post-license-author">
           <strong>本文作者：</strong>
           <a href="https://tianma.space">Tianma</a>
       </li>

       <li class="post-license-link">
           <strong>本文链接：</strong>
           <a href="https://tianma.space/post/579806496/">Android 笔记：Activity 二三事</a>
       </li>

       <li class="post-license-statement">
           <strong>版权声明： </strong>
           本文由 Tianma 原创，采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="license" target="_blank">署名-非商业性使用-相同方式共享（CC BY-NC-SA）4.0 国际许可协议</a> </br>转载请保留以上声明信息！
       </li>
   </ul>
</div>
		
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: '55a5d9da39a7a1f372ab',
            clientSecret: '91f6174c3199a1181f423f93f88b2df5865b96a2',
            repo: 'tianma8023.github.io',
            owner: 'tianma8023',
            admin: ['tianma8023'],
            // facebook-like distraction free mode
            id: '/post/579806496',
            title: 'Android 笔记：Activity 二三事',
            body: 'https://tianma.space/post/579806496/',
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/post/3847558889/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/post/1810369046/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/kousei.jpg" alt="Tianma's avatar">
    </div>

    <!-- Sidebar Email -->
    <!--
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        lovelymer#foxmail.com
        <b class="caret"></b>
    </a>
    -->
    <a class="sidebar-brand">
        lovelymer#foxmail.com
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/12/">十二月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/10/">十月 2018<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/07/">七月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Algorithm-Data-Structure/">Algorithm & Data Structure<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/categories/Hexo/">Hexo<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/Java/">Java<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/漫谈/">漫谈<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/科学上网/">科学上网<span class="sidebar_archives-count">6</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            
            <a href="/tags" title="标签">
            
                
                    <i class="material-icons sidebar-material-icons">label_outline</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            
            <a href="/timeline" title="Timeline">
            
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                Timeline
            </a>
        </li>
        
    
        <li>
            
            <a href="/darling" title="Darling" target="_blank">
            
                
                    <i class="material-icons sidebar-material-icons">favorite_border</i>
                
                Darling
            </a>
        </li>
        
    
        <li>
            
            <a href="/about" title="关于">
            
                
                    <i class="material-icons sidebar-material-icons">person_outline</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            
            <a href="https://github.com/viosey/hexo-theme-material" title="主题" target="_blank">
            
                
                    <i class="material-icons sidebar-material-icons">stars</i>
                
                主题
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/tianma8023" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    
        <a href="https://space.bilibili.com/4504127#/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-bilibili">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    

    	<!-- Jianshu -->
	
		<a href="https://www.jianshu.com/u/9b3c643402b6" class="footer-jianshu" target="_blank">
			<button class="mdl-mini-footer--social-btn social-btn footer-sns-jianshu" >
				<span class="visuallyhidden">Jianshu</span>
			</button>
		</a>
	
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var curYear = new Date().getFullYear();
                var since = 2016;
                if (curYear != since) {
                    document.write(since + ' ~ ' + curYear);
                } else {
                    document.write(curYear);                    
                }
            </script>
            &nbsp;❤&nbsp;Tianma
			
            
                <br>
                
                    Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a>, Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a>
                
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->
        <!-- 
        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
        -->
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('o5BQOrzP48nkdkyfJYQ8mRRf-gzGzoHsz', 'ypNURFLzI6NMQwz1OVl782d5');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>




    <!-- Busuanzi -->
    <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->


    
        <script>lsloader.load("hanabi","/js/hanabi-browser-bundle.js?Pki5+pzkluqu53g+ouMWpA==", true)</script>
    


<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
        
        
        HanabiBrowser.start('pre code',true);
    
</script>

<!-- MathJax Load-->


<!-- live2d -->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
</script>

                </main>
            </div>
        </body>
    
</html>
