<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            下载工具aria2 - 配置和使用 | 
        
        Tianma
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Tianma">
    <meta name="description" content="Everything will be okay in the end.">
    <meta name="keywords" content="hexo, material,aria2,下载工具">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Tianma">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://tianma.pro">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="下载工具aria2 - 配置和使用 | Tianma">
    <meta property="og:description" content="Everything will be okay in the end.">
    <meta property="og:article:tag" content="aria2"> <meta property="og:article:tag" content="下载工具"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="../../css/material.min.css">
    <link rel="stylesheet" href="../../css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #EEEEEE;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/queue.js"></script>
	
	<!-- fancybox support -->
	
		<link rel="stylesheet" href="../../lib/fancybox/dist/jquery.fancybox.min.css">
		<script src="../../lib/fancybox/dist/jquery.fancybox.min.js"></script>
		<script src="../../js/wrapImage.js"></script>
	

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"../../css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    
    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-84178484-1', 'auto');ga('send', 'pageview');
    </script>
    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装"><span class="post-toc-number">2.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置"><span class="post-toc-number">3.</span> <span class="post-toc-text">配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-aria2-conf"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">配置 aria2.conf</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-HideRun-vbs"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">配置 HideRun.vbs</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#下载管理"><span class="post-toc-number">4.</span> <span class="post-toc-text">下载管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#webui-aria2-的使用"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">webui-aria2 的使用</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#进阶"><span class="post-toc-number">5.</span> <span class="post-toc-text">进阶</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#相关链接或参考"><span class="post-toc-number">6.</span> <span class="post-toc-text">相关链接或参考</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://omx3hkcsx.bkt.clouddn.com/static/images/saber_01.jpg)">
    
            <p class="article-headline-p">
                下载工具aria2 - 配置和使用
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/kousei.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Tianma</strong>
        <span>7月 19, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACbUlEQVR42u3aW27jMBAEwNz/0rsHMKJ0Dx92gtJXIMsSSwE4dHO+/v3p4wsPDw8PDw8PD+/DeF/x8fqt7868fvr8xNfzS2PDw8PDu8L7YaoNeO23vhvchqfg4eHhXeQ9T9nJZP18nwSZPxcPDw/vt/Nm5SRfmuPh4eH9dl4eKyT4/Bo8PDy8T+MlP/hXhvtcDJKhH89a8PDw8GJevsl0/++r+3t4eHh4Aa9uaVpeOq+UgWiEeHh4eId57eZW2wqwsmHWjgcPDw/vDm+lHeoZkyCfGwiS+0dLajw8PLytvOEtRkce++btC0Xdw8PDw9vEa7eakgm9jSFmwUcR4+Lh4eEd4LVL56SNYBZPzKIKPDw8vPfyZkvh2SI4uX/yEvHw8PBu8vLpuy0keXmYxRBF1oKHh4d3jLce4M4CjtkrKzoj8PDw8Lby2vB01kaQ3yEPHYrOCDw8PLytvNmmVFtOdi27h01XeHh4eFt5ecSQF5JiKGVMHI0HDw8P7628lTbTKDg4cSUeHh7eYV4eFqxHD3mjQL5hhoeHh/cuXl4S8k39E9FtdAYPDw/vOi8/M9usalu42k/x8PDwbvJmy+v2mvYp9cIdDw8P7628WQFIBtQ+d6npCg8PD28rb1cbQR7grpSE6Fl4eHh4h3mzSbndBpttfW1ousLDw8M7xsuLQbs4bhsL2oBjuL+Hh4eHt4m3a4LOGbNg4od/Bh4eHt4H85Lotm0FaIvKwcKAh4eHd6ww5Avrdok8fE14eHh4F3ntplc7iDYOzoMMPDw8vPu8tt1qPfBtX1NeHvDw8PBO8/7egYeHh4eHh4eH9wHHf7LYNQAdUFGPAAAAAElFTkSuQmCC">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="../../tags/aria2/">aria2</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="../../tags/下载工具/">下载工具</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/post/141514420/" class="leancloud-views_num" data-flag-title="下载工具aria2 - 配置和使用">
     &nbsp;阅读量
</span>

            </li>
        </a>
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=下载工具aria2 - 配置和使用&url=http://tianma.pro/&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://tianma.pro/" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>aria2 是一款支持跨平台、多源、多协议的轻量级的命令行式的下载工具。它支持 HTTP/HTTPS、FTP、SFTP、磁力链接以及 Medialink等多种下载方式。不仅如此，更值得称赞的是，<a href="https://github.com/aria2/aria2" target="_blank" rel="external">aira2</a> 还是一款开源免费的软件。 <a id="more"></a></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>最新的 aria2 release版本下载地址 <a href="https://github.com/aria2/aria2/releases/latest" target="_blank" rel="external">aria2 release</a>。</p>
<blockquote>
<p><strong>注意</strong>：之前网上好多关于 aria2 的下载地址是在 sourceforge 上的，但是由于 aria2 已开源迁移至 GitHub，所以下载最新版本的还是需要找准地址。</p>
</blockquote>
<img alt="aria2下载列表" class=" post-image-center" src="http://omx3hkcsx.bkt.clouddn.com/static/images/aria2_download_list.png?imageView2"><span class="image-caption">aria2下载列表</span>
<p>通过上方官方给的下载列表可以看出，aria2支持的平台有 Windows、MacOS、Linux、Android。注意，<font color="#FF4081">本文只介绍 Windows 平台下的，其他平台烦请另行查阅资料</font>。 Windows 平台只需下载对应位数的zip压缩包，解压缩即可。</p>
<p>解压后的目录结构如下，其体积是相当小的：</p>
<pre class="line-numbers language-shell"><code class="language-shell">aria2-1.32/
├── aria2c.exe
├── AUTHORS
├── ChangeLog
├── COPYING
├── LICENSE.OpenSSL
├── NEWS
├── README.html
└── README.mingw
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>接下来，在 aria2 目录下新建如下几个<strong>空文件</strong>来进行后续配置：</p>
<ul>
<li>aria2.conf - 配置文件</li>
<li>aria2.log - 日志文件</li>
<li>aria2.session - 下载记录文件</li>
<li>HideRun.vbs - 隐藏cmd窗口运行aria2所需要的文件</li>
</ul>
<p>之后 aria2 的目录结构如下：</p>
<pre class="line-numbers language-shell"><code class="language-shell">aria2-1.32/
├── aria2.conf
├── aria2.log
├── aria2.session
├── aria2c.exe
├── AUTHORS
├── ChangeLog
├── COPYING
├── HideRun.vbs
├── LICENSE.OpenSSL
├── NEWS
├── README.html
└── README.mingw
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="配置-aria2-conf"><a href="#配置-aria2-conf" class="headerlink" title="配置 aria2.conf"></a>配置 aria2.conf</h3><p>aria2.conf 文件用于配置 aria2 运行时的相关参数，相关配置项可以参考 <a href="https://aria2c.com/archiver/aria2.conf" target="_blank" rel="external">aria2配置示例</a>。</p>
<p>aria2 有两种下载模式，一种是命令行下载模式，一种是 RPC Server 模式，前者不方便故不建议使用； RPC Server 模式就是把 aria2 当作服务端，通过 RPC 接口接受客户端的下载请求，因为是 Server 模式，aria2 下载完成并不会退出，会一直等待后续的下载请求。所以，需要在 aria2.conf 配置文件中将与 RPC 相关的配置项打开(enable)。 这里我贴出自己的配置文件：</p>
<pre class="line-numbers language-ini"><code class="language-ini">## '#'开头为注释内容, 选项都有相应的注释说明, 根据需要修改 ##
## 被注释的选项填写的是默认值, 建议在需要修改时再取消注释  ##

## 文件保存相关 ##

# 文件的保存路径(可使用绝对路径或相对路径), 默认: 当前启动位置
<span class="token constant">dir</span><span class="token attr-value"><span class="token punctuation">=</span>E:\Downloads</span>
# 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M
<span class="token constant">#disk-cache</span><span class="token attr-value"><span class="token punctuation">=</span>32M</span>
# 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc
# 预分配所需时间: none &lt; falloc ? trunc &lt; prealloc
# falloc和trunc则需要文件系统和内核支持
# NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项
<span class="token constant">file-allocation</span><span class="token attr-value"><span class="token punctuation">=</span>falloc</span>
# 断点续传
<span class="token constant">continue</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>

## 下载连接相关 ##

# 最大同时下载任务数, 运行时可修改, 默认:5
<span class="token constant">max-concurrent-downloads</span><span class="token attr-value"><span class="token punctuation">=</span>4</span>
# 同一服务器连接数, 添加时可指定, 默认:1
<span class="token constant">max-connection-per-server</span><span class="token attr-value"><span class="token punctuation">=</span>5</span>
# 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M
# 假定size<span class="token attr-value"><span class="token punctuation">=</span>10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载</span>
<span class="token constant">min-split-size</span><span class="token attr-value"><span class="token punctuation">=</span>10M</span>
# 单个任务最大线程数, 添加时可指定, 默认:5
<span class="token constant">split</span><span class="token attr-value"><span class="token punctuation">=</span>5</span>
# 整体下载速度限制, 运行时可修改, 默认:0
<span class="token constant">#max-overall-download-limit</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
# 单个任务下载速度限制, 默认:0
<span class="token constant">#max-download-limit</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
# 整体上传速度限制, 运行时可修改, 默认:0
<span class="token constant">#max-overall-upload-limit</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
# 单个任务上传速度限制, 默认:0
<span class="token constant">#max-upload-limit</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
# 禁用IPv6, 默认:false
<span class="token constant">disable-ipv6</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>

## 进度保存相关 ##

# 从会话文件中读取下载任务
<span class="token constant">input-file</span><span class="token attr-value"><span class="token punctuation">=</span>D:\aria2\aria2-1.32\aria2.session</span>
# 在Aria2退出时保存`错误/未完成`的下载任务到会话文件
<span class="token constant">save-session</span><span class="token attr-value"><span class="token punctuation">=</span>D:\aria2\aria2-1.32\aria2.session</span>
# 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0
<span class="token constant">save-session-interval</span><span class="token attr-value"><span class="token punctuation">=</span>60</span>
# log日志路径 默认没有log
# log<span class="token attr-value"><span class="token punctuation">=</span>D:\aria2\aria2-1.32\aria2.log</span>

## RPC相关设置 ##

# 启用RPC, 默认:false
<span class="token constant">enable-rpc</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# 允许所有来源, 默认:false
<span class="token constant">rpc-allow-origin-all</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# 允许非外部访问, 默认:false
<span class="token constant">rpc-listen-all</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同
<span class="token constant">#event-poll</span><span class="token attr-value"><span class="token punctuation">=</span>select</span>
# RPC监听端口, 端口被占用时可以修改, 默认:6800
<span class="token constant">#rpc-listen-port</span><span class="token attr-value"><span class="token punctuation">=</span>6800</span>
# 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项
<span class="token constant">#rpc-secret</span><span class="token attr-value"><span class="token punctuation">=</span>&lt;TOKEN></span>
# 设置的RPC访问用户名, 此选项新版已废弃, 建议改用 --rpc-secret 选项
<span class="token constant">#rpc-user</span><span class="token attr-value"><span class="token punctuation">=</span>&lt;USER></span>
# 设置的RPC访问密码, 此选项新版已废弃, 建议改用 --rpc-secret 选项
<span class="token constant">#rpc-passwd</span><span class="token attr-value"><span class="token punctuation">=</span>&lt;PASSWD></span>

## BT/PT下载相关 ##

# 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true
<span class="token constant">#follow-torrent</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# BT监听端口, 当端口被屏蔽时使用, 默认:6881-6999
<span class="token constant">listen-port</span><span class="token attr-value"><span class="token punctuation">=</span>51413</span>
# 单个种子最大连接数, 默认:55
<span class="token constant">#bt-max-peers</span><span class="token attr-value"><span class="token punctuation">=</span>55</span>
# 打开DHT功能, PT需要禁用, 默认:true
<span class="token constant">enable-dht</span><span class="token attr-value"><span class="token punctuation">=</span>false</span>
# 打开IPv6 DHT功能, PT需要禁用
<span class="token constant">#enable-dht6</span><span class="token attr-value"><span class="token punctuation">=</span>false</span>
# DHT网络监听端口, 默认:6881-6999
<span class="token constant">#dht-listen-port</span><span class="token attr-value"><span class="token punctuation">=</span>6881-6999</span>
# 本地节点查找, PT需要禁用, 默认:false
<span class="token constant">#bt-enable-lpd</span><span class="token attr-value"><span class="token punctuation">=</span>false</span>
# 种子交换, PT需要禁用, 默认:true
<span class="token constant">enable-peer-exchange</span><span class="token attr-value"><span class="token punctuation">=</span>false</span>
# 每个种子限速, 对少种的PT很有用, 默认:50K
<span class="token constant">#bt-request-peer-speed-limit</span><span class="token attr-value"><span class="token punctuation">=</span>50K</span>
# 客户端伪装, PT需要
<span class="token constant">peer-id-prefix</span><span class="token attr-value"><span class="token punctuation">=</span>-TR2770-</span>
<span class="token constant">user-agent</span><span class="token attr-value"><span class="token punctuation">=</span>Transmission/2.77</span>
# 当种子的分享率达到这个数时, 自动停止做种, 0为一直做种, 默认:1.0
<span class="token constant">seed-ratio</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>
# 强制保存会话, 即使任务已经完成, 默认:false
# 较新的版本开启后会在任务完成后依然保留.aria2文件
<span class="token constant">#force-save</span><span class="token attr-value"><span class="token punctuation">=</span>false</span>
# BT校验相关, 默认:true
<span class="token constant">#bt-hash-check-seed</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# 继续之前的BT任务时, 无需再次校验, 默认:false
<span class="token constant">bt-seed-unverified</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
# 保存磁力链接元数据为种子文件(.torrent文件), 默认:false
<span class="token constant">bt-save-metadata</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>更多更详尽的配置项请参考官方 <a href="https://aria2.github.io/manual/en/html/aria2c.html#options" target="_blank" rel="external">manual</a></p>
<h3 id="配置-HideRun-vbs"><a href="#配置-HideRun-vbs" class="headerlink" title="配置 HideRun.vbs"></a>配置 HideRun.vbs</h3><p>HideRun.vbs 文件的目的是就是让 aria2 隐藏 cmd 窗口运行。<br>往 HideRun.vbs 写入如下脚本内容：</p>
<pre class="line-numbers language-VBScript"><code class="language-VBScript">CreateObject("WScript.Shell").Run "aria2c.exe --conf-path=aria2.conf -D",0
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>通过 HideRun.vbs 内容我们可以知道， aria2c.exe 每次在运行时是要去加载 aria2.conf 配置文件的，所以<font color="#FF4081">需要双击  HideRun.vbs 来启动aria2，而不是双击 aria2c.exe</font>。</p>
<h2 id="下载管理"><a href="#下载管理" class="headerlink" title="下载管理"></a>下载管理</h2><p>aria2 是基于命令行的下载工具，本身是没有用于管理的界面的，一切都基于命令行，但有基于网页的管理界面（webui）：</p>
<ol>
<li>aria2官网提及的 <a href="https://github.com/ziahamza/webui-aria2" target="_blank" rel="external">webui-aria2</a> 项目</li>
<li>Binux大大的 <a href="http://binux.github.io/yaaw/demo/" target="_blank" rel="external">YAAW</a></li>
</ol>
<p>在这里我推荐 aria2 官网提及的 <code>webui-aria2</code> 作为Web管理界面，因为就目前看来它更好用 XD。</p>
<h3 id="webui-aria2-的使用"><a href="#webui-aria2-的使用" class="headerlink" title="webui-aria2 的使用"></a>webui-aria2 的使用</h3><p>有以下方式使用 webui-aria2：</p>
<ol>
<li>直接访问 <a href="https://ziahamza.github.io/webui-aria2/" target="_blank" rel="external">在线的 webui-aria2 页面</a> 来进行 aria2 的下载管理，一般来说选用这个就行；</li>
<li>通过将 <a href="https://github.com/ziahamza/webui-aria2" target="_blank" rel="external">webui-aria2</a> 这个repo下载下来，然后打开 index.html 来进行 aria2 的下载管理；</li>
</ol>
<p>在使用 webui-aria2 进行 aria2 的下载管理前，可能需要在web管理页面进行相关配置：<br><code>设置 -&gt; 连接设置 -&gt; Aria2 RPC 主机和端口</code>，需要根据提示完成相应的配置（具体需要填什么内容取决于之前的 aria2.conf的配置）。</p>
<p>在这里贴上我的 webui-aria2 的连接设置，因为令牌等都未启用，所以都是空：<br><img alt="webui-aria2" class=" post-image-center" src="http://omx3hkcsx.bkt.clouddn.com/static/images/aria2_webui_conn_config.png?imageView2/2/w/581/h/588"><span class="image-caption">webui-aria2</span></p>
<p>在 webui-aria2 管理界面上，可以点击 <code>添加</code> 来添加链接、种子或 Medialink，来新增 aria2 的下载任务。更多其他操作（包括暂定、删除、重新下载等），在web界面上都有相应的入口，很简单，这里就不再详细介绍了。</p>
<p>最后附一张 <code>webui-aria2</code> 管理界面截图：</p>
<img alt="webui-aria2 管理界面" class=" post-image-center" src="http://omx3hkcsx.bkt.clouddn.com/static/images/aria2_webui_screenshot.png?imageView2"><span class="image-caption">webui-aria2 管理界面</span>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><ul>
<li>结合 <code>BaiduExporter(网盘助手)</code> 越过某(bai)度网盘下载速度限制，从而高速下载网盘文件，详情请戳 <a href="/post/3364832428">BaiduExporter 介绍与使用</a></li>
</ul>
<h2 id="相关链接或参考"><a href="#相关链接或参考" class="headerlink" title="相关链接或参考"></a>相关链接或参考</h2><ul>
<li><a href="http://bbs.kafan.cn/thread-1686205-1-1.html" target="_blank" rel="external">用火狐我喜欢用aria2下载，写写windows下教程吧</a></li>
<li><a href="https://aria2c.com/usage.html" target="_blank" rel="external">Aria2 &amp; YAAW 使用说明</a></li>
<li><a href="https://github.com/aria2/aria2" target="_blank" rel="external">aria2</a></li>
<li><a href="https://github.com/ziahamza/webui-aria2" target="_blank" rel="external">webui-aria2</a></li>
</ul>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




    <!-- 使用 DISQUS_CLICK -->
    <div id="disqus-comment">	
        <div id="disqus_thread"></div>
<!-- include js -->
<script src="/js/ripple.js"></script>

<!-- add animation -->
<style>
        .ripple-container {
        }
        .ripple-container .ripple{
            background-color: rgba(255,255,255,0.4);
            animation: ripple 2s forwards cubic-bezier(0, 0, 0.2, 1);
        }
        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            80% {
                transform: scale(1);
            }
            100% {
                opacity: 0;
            }
        }
		.disqus_click_btn {
            background-color: dodgerblue;
            color: white;
            padding: 10px 20px;
            border:0;
            font-size: 14px;
            cursor: pointer
        }
</style>
	
<!-- add data-ripple attribute -->
<div class="btn_click_load"> 
    <button class="disqus_click_btn" data-ripple>阅读评论 「请确保 disq.us &amp; disquscdn.com &amp; disqus.com 可以正常加载」</button>
</div>
	
<script>
    // add effect to elements
    Array.prototype.forEach.call(document.querySelectorAll('[data-ripple]'), function(element){
        // find all elements and attach effect
        new RippleEffect(element); // element is instance of javascript element node
    });
</script>

<script>
    $('.btn_click_load').click(function() {  //click to load comments
        var disqus_config = function () {
            this.page.url = 'http://tianma.pro';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//tianma.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
  	

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/post/3364832428/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/post/1310087385/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/kousei.jpg" alt="Tianma's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        tianma8023@foxmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:tianma8023@foxmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="../../archives/2018/01/">一月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/07/">七月 2017<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/04/">四月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2016/10/">十月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2016/05/">五月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2016/04/">四月 2016<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2016/03/">三月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="../../archives/2015/11/">十一月 2015<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="../../categories/Algorithm-Data-Structure/">Algorithm & Data Structure<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="../../categories/Android/">Android<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="../../categories/Hexo/">Hexo<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../categories/Java/">Java<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="../../categories/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="../../categories/杂记漫谈/">杂记漫谈<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="../../categories/科学上网/">科学上网<span class="sidebar_archives-count">6</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">label_outline</i>
                
                标签
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person_outline</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            <a href="https://github.com/viosey/hexo-theme-material" title="主题">
                
                    <i class="material-icons sidebar-material-icons">stars</i>
                
                主题
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/tianma8023" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var curYear = new Date().getFullYear();
                var since = 2016;
                if (curYear != since) {
                    document.write(since + ' ~ ' + curYear);
                } else {
                    document.write(curYear);                    
                }
            </script>
            &nbsp;
            <span class="with-love">
                <i class="fa fa-heart"></i>
            </span>
            &nbsp;Tianma
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="../../js/lazyload.min.js"></script>
<script src="../../js/js.min.js"></script>
<script src="../../js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('o5BQOrzP48nkdkyfJYQ8mRRf-gzGzoHsz', 'ypNURFLzI6NMQwz1OVl782d5');
    </script>
    <script>
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>










<!-- Swiftye -->


<!-- Local Search-->

    <script>
    var searchFunc = function(path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: 'xml',
            success: function( xmlResponse ) {
                // get the contents from search data
                var datas = $( 'entry', xmlResponse ).map(function() {
                    return {
                        title: $( 'title', this ).text(),
                        content: $('content',this).text(),
                        url: $( 'url' , this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function() {
                    var str='<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = '';
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function(data) {
                        var isMatch = true;
                        var content_index = [];
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g,'').toLowerCase();
                        var data_url = data.url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if(data_title !== '' && data_content !== '') {
                            keywords.forEach(function(keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if( index_title < 0 && index_content < 0 ) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += '<li><a href="'+ data_url +'" class="search-result-title" target="_blank">'+ data_title;
                            var content = data.content.trim().replace(/<[^>]+>/g, '');
                            if (first_occur >= 0) {
                                // cut out characters
                                var start = first_occur - 6;
                                var end = first_occur + 6;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 10;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, 'gi');
                                    match_content = match_content.replace(regS, '<em class="search-keyword">'+keyword+'</em>');
                                })
                                str += '<p class="search-result">' + match_content + '...</p>' +'</a>';
                            }
                        }
                    });
                    $resultContent.innerHTML = str;
                });
            }
        });
    }
</script>


    <script>
        var inputArea = document.querySelector('#search');
        var getSearchFile = function() {
            var path = 'search.xml';
            searchFunc(path, 'search', 'local-search-result');
        }

        if(inputArea) {
            inputArea.onfocus = function() {
                getSearchFile();
            }
        }
    </script>


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
